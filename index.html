<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
		<link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300|Pacifico|Roboto+Condensed|Sigmar+One" rel="stylesheet">


    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
				// We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
		
		
			

        for(var i = 0; i<geemails.length; i++){
					var subjectBox = document.createElement('li');
					subjectBox.className = 'sub';
					subjectBox.innerHTML = geemails[i].subject;
					subjectBox.addEventListener ('click', showMsg)
					what.appendChild(subjectBox);
					
					var senderBox = document.createElement('li');
					senderBox.className = 'send';
					senderBox.innerHTML = geemails[i].sender;
					who.appendChild(senderBox);
				
					var bodyBox = document.createElement('p');
					bodyBox.className = 'bod';
					bodyBox.innerHTML = geemails[i].body;
					subjectBox.appendChild(bodyBox);

					var dateBox = document.createElement('p');
					dateBox.className = 'when';
					dateBox.innerHTML = geemails[i].date;
					bodyBox.appendChild(dateBox);

					var msgCount = document.getElementById('inboxCnt');
					msgCount.innerHTML = 'Inbox ' + geemails.length;
		 
							
		}

		function showMsg(){
					var getMsg = this.querySelectorAll('.bod')[0];
					if(getMsg.style.display === 'block'){
						getMsg.style.display = 'none';
					}else{
						getMsg.style.display = 'block';
					}
	
				}

				
				// var divElem = document.getElementsByClassName('sub');

				// for(var i = 0; i<divElem.length; i++){
				// 	divElem[i].addEventListener('click', showMsg);
				// }
				
			 	function getMoreMail(){
			 	var newMail = getNewMessage();
				

			 	 var newSubjectBox = document.createElement('li');
			 	 newSubjectBox.className = 'sub';
				  newSubjectBox.innerHTML = newMail.subject;
				  //newSubjectBox.addEventListener('click',)
			 	 what.appendChild(newSubjectBox);

			 	var newSenderBox = document.createElement('li');
			 	newSenderBox.className = 'send';
				newSenderBox.innerHTML = newMail.sender;
				who.appendChild(newSenderBox);

				var newBodyBox = document.createElement('p');
				newBodyBox.className = 'bod';
				newBodyBox.innerHTML = newMail.body;
				subjectBox.appendChild(newBodyBox);

				var newDateBox = document.createElement('p');
				newDateBox.className = 'when';
				newDateBox.innerHTML = newMail.date;
				bodyBox.appendChild(newDateBox);

			
				
			 }
				 

				

		setInterval(getMoreMail, 3000);

				
				
	
		
			};
			
    </script>
	</head>
	<body>
		<h2><span id='letter'>G</span>ee-<span id='letter'>M</span>ail</h2>
		<div class="container" id="main">
			
		<div id="category">
			<li id="inboxCnt"></li><br>
			<li class="message1">Draft</li><br>
			<li class="message1">Sent</li><br>
			<li class="message1">Spam</li><br>
			<li class="message1">Trash</li></div>
			</div><br><br><br>
			<table style="width:100%">
				<tr>
				  <th>Sender</th>
				  <th>Subject</th> 
				
			  </table>
			<div class="contents">
			<div id="who"></div>
			<div id="what"></div></div></div>
			
			
			
	</body>
</html>